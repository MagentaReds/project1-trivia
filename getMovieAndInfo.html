<!DOCTYPE html>

<head>
    <title></title>
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        var plot = "";
        var title = "";

        function randomDate(start, end) {
            var date = +start + Math.floor(Math.random() * (end - start));
            return date;
        }

        function getMovieName(queryYear) {
            // Constructing a URL to search 
            var year = queryYear;
            var title = "";
            var x = 0;

            var queryURL = "https://api.themoviedb.org/3/discover/movie?api_key=1c916b5ee7a77ed6aa84e46c17622f72&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&primary_release_year=" + year;
            //Performing our AJAX GET request
            $.ajax({
                    url: queryURL,
                    method: "GET"
                })
                .done(function(response) {
                    console.log(response);
                    //Storing the data returned data from AJAX request
                    var results = response.results;
                    //generate random number to select random title from top 20 results
                    x = +1 + Math.floor(Math.random() * (20 - 1));
                    //console log for testing
                    console.log("Random number " + x);
                    title = (results[x].title);
                    plot = (results[x].overview);
                    //console log for testing
                    console.log("title " + title);
                    console.log("Plot " + plot);
                });
            return title;
        }

        //        function getWikiData(movieTitle) {
        //console.log("getWikiData " + movieTitle);
        //var title = movieTitle.replace(" ","%20");
        //console.log(title);

        //for testing
        //title = "Raiders of the lost Ark";

        //            title = movieTitle.replace(/ /g, "%20");
        //            console.log(title);
        //            wikiURL = "https://en.wikipedia.org/api/rest_v1/page/html/raiders%20of%20the%20lost%20ark?sections=Plot";
        //    }


        var queryYear = randomDate("1979", "2017");
        getMovieName(queryYear);
        //getWikiData(title);

    });
    </script>
</body>

</html>
